from unittest import TestCase

from profile_generator.main.profile_params import ProfileParams

from .lch import generate

DEFAULT = {
    "HSVEnabled": "false",
    "HSVHCurve": "0;",
    "HSVSCurve": "0;",
    "HSVVCurve": "0;",
}

class LchTest(TestCase):
    def test_generate_default(self) -> None:
        params = ProfileParams()
        params.parse({})

        self.assertDictEqual(generate(params), DEFAULT)

    def test_generate_hue(self) -> None:
        params = ProfileParams()
        params.parse({"colors": {"grading": {"lch": {"hue": {
            "orange": 2,
            "teal": -2,
        }}}}})

        self.maxDiff = None
        self.assertDictEqual(
            generate(params),
            DEFAULT
            | {
                "HSVEnabled": "true",
                "HSVHCurve": "1;0.0000000;0.5081993;0.0000000;0.0000000;"
                + "0.0470588;0.5082998;0.0000000;0.0000000;"
                + "0.0941176;0.5076828;0.0000000;0.0000000;"
                + "0.1411765;0.5064691;0.0000000;0.0000000;"
                + "0.1882353;0.5047979;0.0000000;0.0000000;"
                + "0.2352941;0.5028084;0.0000000;0.0000000;"
                + "0.2823529;0.5006395;0.0000000;0.0000000;"
                + "0.3294118;0.4984305;0.0000000;0.0000000;"
                + "0.3764706;0.4963205;0.0000000;0.0000000;"
                + "0.4235294;0.4944485;0.0000000;0.0000000;"
                + "0.4705882;0.4929538;0.0000000;0.0000000;"
                + "0.5176471;0.4919755;0.0000000;0.0000000;"
                + "0.5647059;0.4916526;0.0000000;0.0000000;"
                + "0.6117647;0.4920417;0.0000000;0.0000000;"
                + "0.6588235;0.4930050;0.0000000;0.0000000;"
                + "0.7058824;0.4944372;0.0000000;0.0000000;"
                + "0.7529412;0.4962342;0.0000000;0.0000000;"
                + "0.8000000;0.4982921;0.0000000;0.0000000;"
                + "0.8470588;0.5005067;0.0000000;0.0000000;"
                + "0.8941176;0.5027741;0.0000000;0.0000000;"
                + "0.9411765;0.5049901;0.0000000;0.0000000;"
                + "0.9882353;0.5070508;0.0000000;0.0000000;"
            }
        )

from unittest import TestCase

from profile_generator.main.profile_params import ProfileParams

from . import generate

DEFAULT = {
    "RGBCurvesEnabled": "false",
    "RGBCurvesRCurve": "0;",
    "RGBCurvesGCurve": "0;",
    "RGBCurvesBCurve": "0;",
}


class ProfileGeneratorTest(TestCase):
    def test_default(self) -> None:
        params = ProfileParams()
        params.parse({})

        result = generate(params)

        self.assertEqual(result, DEFAULT)

    def test_two(self) -> None:
        params = ProfileParams()
        params.parse(
            {
                "colors": {
                    "grading": {
                        "toning": {
                            "channels": "_2",
                            "shadow": [0, 5, 270],
                            "highlight": [0, 5, 90],
                        }
                    }
                }
            }
        )

        result = generate(params)

        self.assertEqual(
            result,
            {
                "RGBCurvesEnabled": "true",
                "RGBCurvesRCurve": "4;"
                + "0.0000000;0.0000000;0.0312500;0.0310431;"
                + "0.0625000;0.0618420;0.0937500;0.0923464;"
                + "0.1250000;0.1220335;0.1562500;0.1514093;"
                + "0.1875000;0.1806816;0.2187500;0.2100600;"
                + "0.2500000;0.2397487;0.2812500;0.2699388;"
                + "0.3125000;0.3008113;0.3437500;0.3328813;"
                + "0.3750000;0.3660858;0.4062500;0.4000529;"
                + "0.4375000;0.4344533;0.4687500;0.4690058;"
                + "0.5000000;0.5034716;0.5312500;0.5376442;"
                + "0.5625000;0.5713388;0.5937500;0.6043803;"
                + "0.6250000;0.6365931;0.6562500;0.6679194;"
                + "0.6875000;0.6987301;0.7187500;0.7291427;"
                + "0.7500000;0.7592443;0.7812500;0.7891235;"
                + "0.8125000;0.8188715;0.8437500;0.8485823;"
                + "0.8750000;0.8783525;0.9062500;0.9082808;"
                + "0.9375000;0.9384661;0.9687500;0.9690071;1.0000000;1.0000000;",
                "RGBCurvesGCurve": "4;"
                + "0.0000000;0.0000000;0.0312500;0.0312641;"
                + "0.0625000;0.0625447;0.0937500;0.0938450;"
                + "0.1250000;0.1251998;0.1562500;0.1565745;"
                + "0.1875000;0.1879552;0.2187500;0.2193286;"
                + "0.2500000;0.2506816;0.2812500;0.2820020;"
                + "0.3125000;0.3132782;0.3437500;0.3444761;"
                + "0.3750000;0.3755985;0.4062500;0.4066684;"
                + "0.4375000;0.4377068;0.4687500;0.4687326;"
                + "0.5000000;0.4997622;0.5312500;0.5308104;"
                + "0.5625000;0.5618909;0.5937500;0.5930163;"
                + "0.6250000;0.6241994;0.6562500;0.6554445;"
                + "0.6875000;0.6867256;0.7187500;0.7180342;"
                + "0.7500000;0.7493643;0.7812500;0.7807094;"
                + "0.8125000;0.8120632;0.8437500;0.8434192;"
                + "0.8750000;0.8747708;0.9062500;0.9061113;"
                + "0.9375000;0.9374341;0.9687500;0.9687325;1.0000000;1.0000000;",
                "RGBCurvesBCurve": "4;"
                + "0.0000000;0.0000000;0.0312500;0.0318427;"
                + "0.0625000;0.0643568;0.0937500;0.0976710;"
                + "0.1250000;0.1331399;0.1562500;0.1693223;"
                + "0.1875000;0.2056829;0.2187500;0.2417250;"
                + "0.2500000;0.2769839;0.2812500;0.3110218;"
                + "0.3125000;0.3433985;0.3437500;0.3727939;"
                + "0.3750000;0.3992025;0.4062500;0.4233857;"
                + "0.4375000;0.4460837;0.4687500;0.4680162;"
                + "0.5000000;0.4898842;0.5312500;0.5123716;"
                + "0.5625000;0.5361466;0.5937500;0.5618621;"
                + "0.6250000;0.5901560;0.6562500;0.6212429;"
                + "0.6875000;0.6539374;0.7187500;0.6878427;"
                + "0.7500000;0.7226618;0.7812500;0.7581026;"
                + "0.8125000;0.7938776;0.8437500;0.8297037;"
                + "0.8750000;0.8653026;0.9062500;0.9003999;"
                + "0.9375000;0.9347255;0.9687500;0.9680131;1.0000000;1.0000000;",
            },
        )

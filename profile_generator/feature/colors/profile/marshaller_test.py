from unittest import TestCase

from .marshaller import get_profile_args

_DEFAULT = {
    "LabEnabled": "false",
    "LabaCurve": "0;",
    "LabbCurve": "0;",
}


class MarshallerTest(TestCase):
    def test_default(self) -> None:
        self.assertEqual(_DEFAULT, get_profile_args({}))

    def test_vibrance(self) -> None:
        self.assertEqual(
            {
                "LabEnabled": "true",
                "LabaCurve": "4;0.000000;0.000000;0.041667;0.024473;0.083333;0.052083;"
                + "0.125000;0.083014;0.166667;0.117393;0.208333;0.155273;"
                + "0.250000;0.196612;0.291667;0.241254;0.333333;0.288921;"
                + "0.375000;0.339207;0.416667;0.391582;0.458333;0.445416;"
                + "0.500000;0.500000;0.541667;0.554584;0.583333;0.608418;"
                + "0.625000;0.660793;0.666667;0.711079;0.708333;0.758746;"
                + "0.750000;0.803388;0.791667;0.844727;0.833333;0.882607;"
                + "0.875000;0.916986;0.916667;0.947917;0.958333;0.975527;"
                + "1.000000;1.000000;",
                "LabbCurve": "4;0.000000;0.000000;0.041667;0.024473;0.083333;0.052083;"
                + "0.125000;0.083014;0.166667;0.117393;0.208333;0.155273;"
                + "0.250000;0.196612;0.291667;0.241254;0.333333;0.288921;"
                + "0.375000;0.339207;0.416667;0.391582;0.458333;0.445416;"
                + "0.500000;0.500000;0.541667;0.554584;0.583333;0.608418;"
                + "0.625000;0.660793;0.666667;0.711079;0.708333;0.758746;"
                + "0.750000;0.803388;0.791667;0.844727;0.833333;0.882607;"
                + "0.875000;0.916986;0.916667;0.947917;0.958333;0.975527;"
                + "1.000000;1.000000;",
            },
            get_profile_args({"vibrance": 50}),
        )

        self.assertEqual(
            {
                "LabEnabled": "true",
                "LabaCurve": "4;0.000000;0.119203;1.000000;0.880797;",
                "LabbCurve": "4;0.000000;0.119203;1.000000;0.880797;",
            },
            get_profile_args({"vibrance": -50}),
        )

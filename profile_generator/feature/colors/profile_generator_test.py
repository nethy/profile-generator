from unittest import TestCase

from profile_generator.main.profile_params import ProfileParams

from .grading import profile_generator_test as grading_test
from .profile_generator import generate
from .white_balance import profile_generator_test as wb_test

_DEFAULT = {
    "LCEnabled": "false",
    "ACurve": "0;",
    "BCurve": "0;",
    **wb_test.DEFAULT,
    **grading_test.DEFAULT,
    **grading_test.DEFAULT,
}


class ProfileGeneratorTest(TestCase):
    def test_generate_defaults(self) -> None:
        self.assertEqual(generate(ProfileParams()), _DEFAULT)

    def test_generate_vibrance(self) -> None:
        profile_params = ProfileParams()
        profile_params.parse({"colors": {"vibrance": 5}})
        self.assertEqual(
            generate(profile_params),
            _DEFAULT
            | {
                "LCEnabled": "true",
                "ACurve": "4;0.0000000;0.0000000;0.0392157;0.0268456;"
                + "0.0784314;0.0551724;0.1176471;0.0851064;0.1568627;"
                + "0.1167883;0.1960784;0.1503759;0.2313725;0.1823802;"
                + "0.2666667;0.2162162;0.3019608;0.2520458;0.3372549;"
                + "0.2900506;0.3686275;0.3258232;0.4000000;0.3636364;"
                + "0.4313725;0.4036697;0.4627451;0.4461248;0.4901961;"
                + "0.4854369;0.5176471;0.5260116;0.5450980;0.5647280;"
                + "0.5764706;0.6065574;0.6078431;0.6460177;0.6392157;"
                + "0.6833046;0.6705882;0.7185930;0.7058824;0.7560976;"
                + "0.7411765;0.7914692;0.7764706;0.8248848;0.8117647;"
                + "0.8565022;0.8509804;0.8896952;0.8901961;0.9210155;"
                + "0.9294118;0.9506173;0.9686275;0.9786382;1.0000000;1.0000000;",
                "BCurve": "4;0.0000000;0.0000000;0.0392157;0.0268456;"
                + "0.0784314;0.0551724;0.1176471;0.0851064;0.1568627;"
                + "0.1167883;0.1960784;0.1503759;0.2313725;0.1823802;"
                + "0.2666667;0.2162162;0.3019608;0.2520458;0.3372549;"
                + "0.2900506;0.3686275;0.3258232;0.4000000;0.3636364;"
                + "0.4313725;0.4036697;0.4627451;0.4461248;0.4901961;"
                + "0.4854369;0.5176471;0.5260116;0.5450980;0.5647280;"
                + "0.5764706;0.6065574;0.6078431;0.6460177;0.6392157;"
                + "0.6833046;0.6705882;0.7185930;0.7058824;0.7560976;"
                + "0.7411765;0.7914692;0.7764706;0.8248848;0.8117647;"
                + "0.8565022;0.8509804;0.8896952;0.8901961;0.9210155;"
                + "0.9294118;0.9506173;0.9686275;0.9786382;1.0000000;1.0000000;",
            },
        )

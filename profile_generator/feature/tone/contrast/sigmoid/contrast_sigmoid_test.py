from unittest import TestCase

from .contrast_sigmoid import Point, contrast, flat

_GREY18 = 87 / 255
_SLOPE = 2.5


class ContrastSigmoid(TestCase):
    def test_flat(self) -> None:
        self.assertEqual(
            flat(_GREY18),
            [
                Point(x=0.0000000, y=0.0000000),
                Point(x=0.0322581, y=0.0581987),
                Point(x=0.0645161, y=0.1007712),
                Point(x=0.0967742, y=0.1428147),
                Point(x=0.1290323, y=0.1848582),
                Point(x=0.1612903, y=0.2269017),
                Point(x=0.1935484, y=0.2689452),
                Point(x=0.2258065, y=0.3109888),
                Point(x=0.2580645, y=0.3530323),
                Point(x=0.2903226, y=0.3950758),
                Point(x=0.3225806, y=0.4371193),
                Point(x=0.3548387, y=0.4788254),
                Point(x=0.3870968, y=0.5176967),
                Point(x=0.4193548, y=0.5538014),
                Point(x=0.4516129, y=0.5876582),
                Point(x=0.4838710, y=0.6196416),
                Point(x=0.5161290, y=0.6500328),
                Point(x=0.5483871, y=0.6790490),
                Point(x=0.5806452, y=0.7068620),
                Point(x=0.6129032, y=0.7336109),
                Point(x=0.6451613, y=0.7594097),
                Point(x=0.6774194, y=0.7843537),
                Point(x=0.7096774, y=0.8085230),
                Point(x=0.7419355, y=0.8319861),
                Point(x=0.7741935, y=0.8548020),
                Point(x=0.8064516, y=0.8770218),
                Point(x=0.8387097, y=0.8986903),
                Point(x=0.8709677, y=0.9198470),
                Point(x=0.9032258, y=0.9405267),
                Point(x=0.9354839, y=0.9607606),
                Point(x=0.9677419, y=0.9805767),
                Point(x=1.0000000, y=1.0000000),
            ],
        )

    def test_contrast(self) -> None:
        self.assertEqual(
            contrast(_GREY18, _SLOPE),
            [
                Point(x=0.0000000, y=0.0000000),
                Point(x=0.0322581, y=0.0044689),
                Point(x=0.0645161, y=0.0103783),
                Point(x=0.0967742, y=0.0181223),
                Point(x=0.1290323, y=0.0282622),
                Point(x=0.1612903, y=0.0415407),
                Point(x=0.1935484, y=0.0589033),
                Point(x=0.2258065, y=0.0814882),
                Point(x=0.2580645, y=0.1105459),
                Point(x=0.2903226, y=0.1472398),
                Point(x=0.3225806, y=0.1923120),
                Point(x=0.3548387, y=0.2456909),
                Point(x=0.3870968, y=0.3062484),
                Point(x=0.4193548, y=0.3719472),
                Point(x=0.4516129, y=0.4404290),
                Point(x=0.4838710, y=0.5097506),
                Point(x=0.5161290, y=0.5775611),
                Point(x=0.5483871, y=0.6412721),
                Point(x=0.5806452, y=0.6990862),
                Point(x=0.6129032, y=0.7501185),
                Point(x=0.6451613, y=0.7942571),
                Point(x=0.6774194, y=0.8319126),
                Point(x=0.7096774, y=0.8637741),
                Point(x=0.7419355, y=0.8906271),
                Point(x=0.7741935, y=0.9132414),
                Point(x=0.8064516, y=0.9323145),
                Point(x=0.8387097, y=0.9484493),
                Point(x=0.8709677, y=0.9621533),
                Point(x=0.9032258, y=0.9738465),
                Point(x=0.9354839, y=0.9838732),
                Point(x=0.9677419, y=0.9925146),
                Point(x=1.0000000, y=1.0000000),
            ],
        )

from unittest import TestCase

from .contrast_sigmoid import Point, get_contrast, get_flat

_GREY18 = 87 / 255
_SLOPE = 2.5


class ContrastSigmoid(TestCase):
    def test_get_flat(self) -> None:
        self.assertEqual(
            get_flat(_GREY18),
            [
                Point(x=0.0000000, y=0.0000000),
                Point(x=0.0235294, y=0.0452948),
                Point(x=0.0549020, y=0.0899102),
                Point(x=0.0862745, y=0.1315688),
                Point(x=0.1176471, y=0.1734616),
                Point(x=0.1490196, y=0.2156143),
                Point(x=0.1803922, y=0.2579846),
                Point(x=0.2117647, y=0.3004159),
                Point(x=0.2431373, y=0.3425991),
                Point(x=0.2745098, y=0.3840483),
                Point(x=0.3058824, y=0.4240848),
                Point(x=0.3411765, y=0.4663266),
                Point(x=0.3764706, y=0.5056756),
                Point(x=0.4117647, y=0.5431514),
                Point(x=0.4470588, y=0.5787859),
                Point(x=0.4862745, y=0.6163199),
                Point(x=0.5254902, y=0.6518485),
                Point(x=0.5647059, y=0.6855817),
                Point(x=0.6039216, y=0.7177559),
                Point(x=0.6470588, y=0.7516415),
                Point(x=0.6901961, y=0.7842604),
                Point(x=0.7333333, y=0.8159061),
                Point(x=0.7764706, y=0.8468268),
                Point(x=0.8196078, y=0.8772126),
                Point(x=0.8627451, y=0.9071872),
                Point(x=0.9058824, y=0.9368037),
                Point(x=0.9490196, y=0.9660451),
                Point(x=0.9921569, y=0.9948269),
                Point(x=1.0000000, y=1.0000000),
            ],
        )

    def test_get_contrast(self) -> None:
        self.assertEqual(
            get_contrast(_GREY18, _SLOPE),
            [
                Point(x=0.0000000, y=0.0000000),
                Point(x=0.0509804, y=0.0003131),
                Point(x=0.1019608, y=0.0015925),
                Point(x=0.1529412, y=0.0063279),
                Point(x=0.2039216, y=0.0218545),
                Point(x=0.2470588, y=0.0555109),
                Point(x=0.2823529, y=0.0954664),
                Point(x=0.3137255, y=0.1397065),
                Point(x=0.3411765, y=0.1856250),
                Point(x=0.3647059, y=0.2303332),
                Point(x=0.3882353, y=0.2796567),
                Point(x=0.4117647, y=0.3329696),
                Point(x=0.4313725, y=0.3797807),
                Point(x=0.4509804, y=0.4280406),
                Point(x=0.4705882, y=0.4769797),
                Point(x=0.4901961, y=0.5256949),
                Point(x=0.5098039, y=0.5731651),
                Point(x=0.5333333, y=0.6272883),
                Point(x=0.5568627, y=0.6772967),
                Point(x=0.5803922, y=0.7225331),
                Point(x=0.6078431, y=0.7689522),
                Point(x=0.6392157, y=0.8138291),
                Point(x=0.6745098, y=0.8549112),
                Point(x=0.7137255, y=0.8908048),
                Point(x=0.7568627, y=0.9210596),
                Point(x=0.8039216, y=0.9459510),
                Point(x=0.8509804, y=0.9647688),
                Point(x=0.9019608, y=0.9802373),
                Point(x=0.9529412, y=0.9919100),
                Point(x=1.0000000, y=1.0000000),
            ],
        )
